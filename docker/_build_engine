#!/bin/bash
set -euo pipefail

# Sprawdzenie, czy podano 2 argumenty
if [ "$#" -ne 2 ]; then
    echo "Usage: $0 <image-name> <dockerfile>"
    exit 1
fi

IMAGE_NAME=$1
DOCKERFILE=$2
# Używamy katalogu, w którym jest skrypt, jako kontekstu
CONTEXT_DIR=$(dirname "$0")

echo ">>> Building Docker image '$IMAGE_NAME' from '$DOCKERFILE'..."

# Uruchomienie budowy z prawidłowymi parametrami
docker build -t "$IMAGE_NAME" -f "$CONTEXT_DIR/$DOCKERFILE" "$CONTEXT_DIR"

echo ">>> Docker image '$IMAGE_NAME' built successfully."